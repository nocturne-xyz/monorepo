enum DepositEventType {
  Instantiated
  Retrieved
  Processed
}

type DepositEvent @entity(immutable: true) {
  id: Bytes!
  idx: BigInt!
  type: DepositEventType!
  spender: Bytes!
  encodedAssetAddr: BigInt!
  encodedAssetId: BigInt!
  value: BigInt!
  depositAddrH1X: BigInt!
  depositAddrH1Y: BigInt!
  depositAddrH2X: BigInt!
  depositAddrH2Y: BigInt!
  nonce: BigInt!
  gasCompensation: BigInt!
}

type EncodedOrEncryptedNote @entity(immutable: true) {
  id: Bytes!
  idx: BigInt!
  merkleIndex: BigInt!
  note: EncodedNote
  encryptedNote: EncryptedNote
}

type EncodedNote @entity(immutable: true) {
  id: Bytes!
  idx: BigInt!
  ownerH1X: BigInt!
  ownerH1Y: BigInt!
  ownerH2X: BigInt!
  ownerH2Y: BigInt!
  nonce: BigInt!
  encodedAssetAddr: BigInt!
  encodedAssetId: BigInt!
  value: BigInt!
}

type EncryptedNote @entity(immutable: true) {
  id: Bytes!
  idx: BigInt!
  ownerH1X: BigInt!
  ownerH1Y: BigInt!
  ownerH2X: BigInt!
  ownerH2Y: BigInt!
  encappedKey: BigInt!
  encryptedNonce: BigInt!
  encryptedValue: BigInt!
  encodedAssetAddr: BigInt!
  encodedAssetId: BigInt!
  commitment: BigInt!
}

type Nullifier @entity(immutable: true) {
  id: Bytes!
  idx: BigInt!
  nullifier: BigInt!
}

type SubtreeCommit @entity(immutable: true) {
  id: Bytes!
  idx: BigInt!
  newRoot: BigInt!
  subtreeIndex: BigInt!
}

type TreeInsertion @entity(immutable: true) {
  id: Bytes!
  idx: BigInt!
  note: CompressedEncodedNote
  noteCommitments: [BigInt!]
}

type CompressedEncodedNote @entity(immutable: true) {
  id: Bytes!
  ownerH1: BigInt!
  ownerH2: BigInt!
  nonce: BigInt!
  encodedAssetAddr: BigInt!
  encodedAssetId: BigInt!
  value: BigInt!
}
